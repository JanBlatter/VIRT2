#!/bin/bash

# Création du container
echo "Création en cours ..."
pct create 201 /var/lib/vz/template/cache/debian-11-standard_11.6-1_amd64.tar.zst --hostname Pentester --memory 512 --net0 name=eth0,bridge=vmbr0,gw=192.168.3.2,ip=192.168.3.120/24, --storage local-lvm --start 1 --sh-public-keys /root/.ssh/authorized_keys --unprivileged 1 --features nesting=1 --password Password --nameserver 192.168.3.2 > /dev/null
echo "Création terminée, Container en démarrage"
pct push 201 /root/scripts/pentester/setup_pentester.sh root/setup_pentester.sh
pct exec 201 chmod +x /root/setup_pentester.sh
pct exec 201 /root/setup_pentester.sh
echo "Terminé"
echo "Téléchargement des paquets ..."